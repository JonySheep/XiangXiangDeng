# 进销存系统软件需求规格说明 v0.7.5

> 作者：杨郁芩，邱浩旻，冉杰文，尚柯宇

## 目录

[TOC]

## 更新历史

| 修改人员            | 日期         | 变更原因              | 版本号     |
| --------------- | ---------- | ----------------- | ------- |
| 杨郁芩、邱浩旻、冉杰文、尚柯宇 | 2017-10-4  | 初稿                | v0.7    |
| 杨郁芩             | 2017-10-16 | 添加用户界面草图          | v.0.7.1 |
| 杨郁芩             | 2017-10-17 | 新增非功能需求           | v0.7.2  |
| 邱浩旻             | 2017-10-26 | 更新期初建账            | v0.7.3  |
| 杨郁芩             | 2017-10-28 | 修改18、19、20的功能需求   | v0.7.4  |
| 邱浩旻             | 2017-10-29 | 增加封面和目录，修改11的功能需求 | v0.7.5  |

------



## 1.引言

### 1.1 目的

​       本文档描述了XX灯具公司进销存系统的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。

​       除特殊说明之外，本文档所包含的需求都是高优先级需求。

### 1.2 范围

​       进销存系统是为XX灯具公司开发的业务系统，开发的目标是帮助该公司处理日常的重点业务，包括库存管理、进货退货、商品销售、财务统计等。

​       通过进销存系统的应用，期望为XX灯具公司减少挤压库存，增加销售额，提高财务人员工作效率，支持经理决策。

### 1.3 参考文献

1. IEEE标准
2. 进销存系统用例描述文档



## 2.总体描述

### 2.1 商品前景

#### 2.1.2 背景与机遇

​       XX灯具公司专业从事灯具照明行业，是某灯具的南京地区总代理，主要在南京负责品牌的推广及项目的落地销售、分销的批发等工作，服务对象包括项目业主、施工单位、分销商、设计院、终端用户等。随着公司规模扩大，企业业务量、办公场所、员工数都发生增长，为适应新的环境，提高工作效率和用户满意度， 该公司聘请公司S开发一套进销存系统。

​       进销存系统就是为满足XX灯具公司新的业务发展要求而开发的，它包括一个数据集中服务器和多个客户端。数据集中服务器将所有的数据存储起来进行维护。用户通过客户端完成日常工作，客户端与数据集中服务器才是实时通信的方式完成数据交换。

#### 2.1.2 业务需求

- **BR1:**在系统使用六个月后，商品积压、缺货和报废的现象要减少50%。
- **BR2:**在系统使用六个月后，财务人员和总经理的工作效率提高50%。
- **BR3:**在系统使用六个月后，销售额度提高20%，最好情况：40%，最可能情况：20%，最坏情况：10%。

------

### 2.2 产品功能

- SF1:分析商品库存，发现可能的商品积压、缺货和报废现象，及时报溢报损
- SF2:根据市场变化调整销售的商品
- SF3:处理商品入库与出库 
- SF4:发展客户，管理客户信息
- SF5:记录并且管理进货、退货、退货
- SF6:管理公司银行账户
- SF7:清算与客户间的账目和公司的现金消费事宜
- SF8:展示公司的销售状况、经营历程和经营情况
- SF9:帮助总经理审批单据
- SF10:制定促销手段进行销售竞争
- SF11:掌握员工变动和授权情况

------

### 2.3 用户特征

| 用户     | 用户特征                                     |
| :----- | :--------------------------------------- |
| 库存管理人员 | 公司大概有1~2名库存管理人员，他们负责根据公司的经营情况和策略对商品分类和商品的信息进行管理；通过查看库存变动，盘点库存快照来掌握仓库内货物的情况；通过制定库存报溢/报损单保持现实库存与系统内库存的一致。他们能够简单使用办公信息化系统，并且希望新系统不要增加现有工作量。 |
| 销售人员   | 公司大概有8~9个销售人员，他们每天都要完成大量的销售任务，预估计在顾客流量较大的节假日，他们平均没小时要处理10~15个销售订单或销售退货订单。销售人员同时还要管理客户信息，每天要进行大量的输入和查找操作，希望新系统能简化他们的工作。 |
| 进货人员   | 公司大概有4~5个进货人员，他们负责公司的进货和进货退货任务。预计在旺季他们每周要进货1~2次。进货人员还要管理供应商信息，渴望能简捷准确的输入查找，希望新系统能简化他们的工作。 |
| 财务人员   | 公司大概有1~2个财务人员，他们负责公司的银行账户管理、收付款单据及现金费用单据的制定、还有红冲的任务。财务人员还可以查看、导出公司的销售明细、经营历程和经营情况。财务人员渴望较强的办公信息化系统，对新系统持积极态度。不希望增加现有工作量。 |
| 总经理    | 公司有2个总经理。他们负责管理公司的日常工作，通过审批其他员工提交的单据，来了解公司的销售状况，同时，总经理可以查看财务人员制定的销售明细表、经营历程表、经营情况表，以更好的掌握公司的经营状况。通过对经营状况的分析，总经理要负责制定合理并具有吸引力的促销策略，来与其他商家竞争，通常有三种促销策略：用户回馈策略、组合降价策略、总额赠送策略。总经理对系统持积极态度，并且能够熟练的使用办公信息化系统。 |
| 管理员    | 整个系统有1个管理员，负责处理人事变动在系统中应对应的变化。管理员角色可以由其他角色同时扮演，只需登录管理员账号即可。管理员对系统持积极态度，并且能够十分熟练的使用办公信息化系统。 |

------

### 2.4 约束

- CON1：系统将运行在Windows X操作系统上
- CON2：系统不使用Web界面，而是图形界面
- CON3：项目要使用持续集成方法进行开发
- CON4：在开发中，开发者要提交软件需求规格说明文档、设计描述文档和测试报告
- CON5：系统要使用JAVA语言进行开发

------

### 2.5 假设和依赖

- AE1：总经理审批单据通过后银行账户操作、库存变动同步完成
- AE2：所有促销策略与折让可叠加
- AE3：每天各类单据出单量不超过99999

------

## 3.详细需求描述

### 3.1 对外接口需求

#### 3.1.1 用户界面

- UI1：商品管理界面![6-0_商品管理（三栏）](http://101.37.19.32:10080/161250180/XiangXiangDeng/raw/dev/doc/img/界面草图/6-0_商品管理（三栏）.png)
- UI2：制定单据界面![1-0_制定单据（双栏带增删）](http://101.37.19.32:10080/161250180/XiangXiangDeng/raw/dev/doc/img/界面草图/1-0_制定单据（双栏带增删）.png)
- UI3：审批单据界面![3-0_审批单据单选（双栏带筛选）](http://101.37.19.32:10080/161250180/XiangXiangDeng/raw/dev/doc/img/界面草图/3-0_审批单据单选（双栏带筛选）.png)
- UI3.1：审批单据批量操作界面![2-0_审批单据多选（双栏带筛选）](http://101.37.19.32:10080/161250180/XiangXiangDeng/raw/dev/doc/img/界面草图/2-0_审批单据多选（双栏带筛选）.png)
- UI4：查看、导出经营历程表与红冲界面![4-0_查看、导出经营历程与红冲（列表）](http://101.37.19.32:10080/161250180/XiangXiangDeng/raw/dev/doc/img/界面草图/4-0_查看、导出经营历程与红冲（列表）.png)
- UI5：银行账户管理／客户管理界面![5-0_银行账户管理（双栏带搜索框、增删）](http://101.37.19.32:10080/161250180/XiangXiangDeng/raw/dev/doc/img/界面草图/5-0_银行账户管理（双栏带搜索框、增删）.png)
- UI6：系统账户管理界面![7-0_系统账户管理（双栏带搜索框、筛选框、增删）](http://101.37.19.32:10080/161250180/XiangXiangDeng/raw/dev/doc/img/界面草图/7-0_系统账户管理（双栏带搜索框、筛选框、增删）.png)



- **界面草图说明**

| 功能需求                            | 对应草图示例        |
| ------------------------------- | ------------- |
| 库存盘点、库存变动查看、制定促销策略、查看销售明细等(共3种) | 列表            |
| 制定单据(共7种)                       | 双栏带增删         |
| 审批单据                            | 双栏带筛选         |
| 管理系统账户                          | 双栏带搜索框、筛选框、增删 |
| 银行账户管理 、客户管理                    | 双栏带搜索框、增删     |
| 商品管理、商品分类管理                     | 三栏            |
| 期初建账                            | 待定            |



#### 3.1.2 通信接口

- CI：客户端与服务器使用RMI的方式进行通信。

------

### 3.2 功能需求

#### 3.2.1 商品管理 ####

- **特性描述**：一个经过验证的库存管理人员可以管理商品分类和商品，包括增加商品分类，删除商品分类，修改商品分类信息，移动商品分类，增加商品，删除商品，修改商品信息，移动商品，查询商品。

- **优先级**：高

- **刺激/响应序列**：

  刺激：库存管理人员选择一个商品分类
  响应：系统显示所选商品分类信息

  刺激：库存管理人员进入一个商品分类
  响应：系统显示所进入商品分类下的商品分类列表/商品列表

  刺激：库存管理人员选择一个商品
  响应：系统显示所选商品信息

  刺激：库存管理人员新建商品分类
  响应：系统生成新商品分类，记录商品分类信息并更新商品分类列表

  刺激：库存管理人员修改商品分类信息
  响应：系统记录商品分类信息并更新商品分类列表

  刺激：库存管理人员移动商品分类
  响应：系统移动所选商品分类至新的分类下

  刺激：库存管理人员删除空商品分类
  响应：系统移除所选商品分类

  刺激：库存管理人员新建商品
  响应：系统生成新商品，记录商品信息并更新商品列表

  刺激：库存管理人员修改商品信息
  响应：系统记录商品信息并更新商品列表

  刺激：库存管理人员移动商品
  响应：系统移动所选商品至新的分类下

  刺激：库存管理人员删除商品
  响应：系统移除所选商品

  刺激：库存管理人员查询商品
  响应：系统显示在查询范围内查询得到的商品列表

- **相关功能需求**：

| 功能需求名称                         | 功能需求描述                                   |
| ------------------------------ | ---------------------------------------- |
| Goods.List.Empty               | 系统应显示无任何商品/商品分类，允许库存管理人员新建商品和新建商品分类（参见Goods.New） |
| Goods.List.Good                | 系统应显示商品列表，允许库存管理人员新建商品，不允许新建商品分类（参见Goods.New） |
| Goods.List.Category            | 系统应显示商品分类列表，允许库存管理人员新建商品分类，不允许新建商品（参见Goods.New） |
| Goods.List.Update              | 系统更新显示的列表，显示方式参见Goods.List（不包括Goods.List.Update） |
| Goods.Select.Category          | 库存管理人员选择一个商品分类时，系统显示所选商品分类的信息，允许库存管理人员修改商品分类信息（参见Goods.Edit） |
| Goods.Select.Category.Empty    | 库存管理人员选择一个空商品分类时，系统应允许库存管理人员删除所选分类（参见Goods.Delete） |
| Goods.Select.Category.NotEmpty | 库存管理人员选择一个非空商品分类时，系统不允许库存管理人员删除所选分类      |
| Goods.Select.Good              | 库存管理人员选择一个商品时，系统显示所选商品的信息，允许库存管理人员修改商品信息（参见Goods.Edit） |
| Goods.Select.Good.NotZero      | 库存管理人员选择一个库存数量不为0的商品时，系统不允许库存管理人员删除所选商品  |
| Goods.Select.Good.Zero         | 库存管理人员选择一个库存数量为0的商品时，系统应允许库存管理人员删除所选商品（参见Goods.Delete） |
| Goods.EnterCategory            | 库存管理人员进入一个空商品分类时，系统将所进入分类作为当前分类，列出属于当前分类的商品分类/商品（参见Goods.List） |
| Goods.New.Category             | 库存管理人员选择新建商品分类时，系统应自动生成商品分类编号，允许库存管理人员输入商品分类名称 |
| Goods.New.Category.Confirm     | 库存管理人员确认新建商品分类时，系统应记录商品分类信息（包括编号、名称），并更新列表（参见Goods.List.Update） |
| Goods.New.Category.Cancel      | 库存管理人员取消新建商品分类时，系统丢弃编辑中的信息不作处理           |
| Goods.New.Good                 | 库存管理人员选择新建商品时，系统应自动生成商品编号，允许库存管理人员输入商品信息（包括名称，型号，警戒数量，进价，零售价） |
| Goods.New.Good.Confirm         | 库存管理人员确认新建商品时，系统应记录商品信息（包括编号，名称，型号，警戒数量，进价，零售价），并更新列表（参见Goods.List.Update） |
| Goods.New.Good.Cancel          | 库存管理人员取消新建商品时，系统应丢弃编辑中的信息不作处理            |
| Goods.Edit.Category            | 库存管理人员选择修改商品分类信息时，系统应允许库存管理人员输入商品分类名称    |
| Goods.Edit.Category.Confirm    | 库存管理人员确认修改商品分类信息时，系统记录商品分类名称，并更新列表（参见Goods.List.Update） |
| Goods.Edit.Category.Cancel     | 库存管理人员取消修改商品分类信息时，系统丢弃编辑中的信息不作处理，返回选择状态（参见Goods.Select） |
| Goods.Edit.Good                | 库存管理人员选择修改商品信息时，系统应允许库存管理人员输入商品信息（包括名称，型号，警戒数量，进价，零售价） |
| Goods.Edit.Good.Confirm        | 库存管理人员确认修改商品信息时，系统记录商品信息（包括名称，型号，警戒数量，进价，零售价），并更新列表（参见Goods.List.Update） |
| Goods.Edit.Good.Cancel         | 库存管理人员取消修改商品信息时，系统丢弃编辑中的信息不作处理           |
| Goods.Move.Category            | 库存管理人员选择移动商品分类时，系统显示商品分类列表（不包含所选分类及其子分类），允许库存管理人员选择新的所属分类 |
| Goods.Move.Category.Confirm    | 库存管理人员确认移动商品分类时，系统记录所选分类新的所属分类，并更新列表（参见Goods.List.Update） |
| Goods.Move.Category.Cancel     | 库存管理人员取消移动商品分类时，系统不作处理                   |
| Goods.Move.Good                | 库存管理人员选择移动商品时，系统显示商品分类列表，允许库存管理人员选择新的所属分类 |
| Goods.Move.Good.Confirm        | 库存管理人员选择确认移动商品时，系统记录所选商品新的所属分类，并更新列表（参见Goods.List.Update） |
| Goods.Move.Good.Cancel         | 库存管理人员选择取消移动商品时，系统不作处理                   |
| Goods.Delete.Category          | 库存管理人员选择删除空商品分类，系统应向库存管理人员提出确认           |
| Goods.Delete.Category.Confirm  | 库存管理人员确认删除空商品分类时，系统移除所选空商品分类，并更新列表（参见Goods.List.Update） |
| Goods.Delete.Category.Cancel   | 库存管理人员取消删除空商品分类时，系统不作处理                  |
| Goods.Delete.Good              | 库存管理人员选择删除商品时，系统应向库存管理人员提出确认             |
| Goods.Delete.Good.Confirm      | 库存管理人员确认删除商品时，系统移除所选商品，并更新列表（参见Goods.List.Update） |
| Goods.Delete.Good.Cancel       | 库存管理人员取消删除商品时，系统不作处理                     |
| Goods.Query.Input              | 系统应允许库存管理人员输入查询关键字/商品编号                  |
| Goods.Query.Result             | 库存管理人员选择查询时，系统应列出在当前分类下查询关键字/商品编号得到的商品列表，不允许新建商品分类/商品（参见Goods.New） |
| Goods.Query.Result.Select      | 库存管理人员选择查询结果中的商品时，系统应作出Goods.Select.Good有相同的行为，并且允许库存管理人员前往商品所属分类（参见Goods.Query.Result.Jump） |
| Goods.Query.Result.Jump        | 库存管理人员选择前往商品所属分类时，系统应进入所选商品所属的分类（参见Goods.EnterCategory） |


#### 3.2.6 客户管理

- **特性描述：**当客户数目或信息发生变动时，一个经过验证的销售或进货人员开始处理数目信息变动，完成对客户信息的增加，删除，改变，查找

- **优先级：**高

- **刺激／相应序列：**

  刺激：销售（进货）人员请求增添客户
  响应：系统为新客户生成编号

  刺激：销售（进货）人员输入新客户的各项信息，包括客户的姓名，类别（进货商或者销售商），级别（一级普通客户，五级VIP客户），电话，地址，邮编，电子邮箱，应收额度，应收，应付，默认业务员
  响应：系统显示新用户添加成功

  刺激：销售（进货）人员输入客户ID或关键字
  响应：系统显示客户信息

  刺激：销售（进货）人员输入ID或关键字所对应客户不存在
  响应：系统显示客户信息不存在

  刺激：销售（进货）人员选定客户
  响应：系统标记客户

  刺激：销售（进货）人员请求修改客户信息
  响应：系统显示可编辑状态的客户信息

  刺激：销售（进货）人员请求删除客户信息
  响应：系统删除客户信息

  刺激：销售（进货）人员请求删除应收应付不为0的客户
  响应：系统显示删除失败

- **相关功能需求：**

  | 编号                          | 需求描述                                     |
  | --------------------------- | ---------------------------------------- |
  | Client.Input                | 系统应改允许销售人员在客户管理任务中进行键盘输入                 |
  | Client.Input.Member         | 在销售人员请求输入客户编号，系统要标记客户，参见Client.Member.Valid |
  | Client.Input.Information    | 在销售人员请求增添修改客户信息时，系统允许客户信息处于可编辑状态         |
  | Client.Input.Invalid        | 在销售人员输入非法标识时，系统显示输入无效                    |
  | Client.Member.Start         | 在查找客户时请求标记客户，系统要允许销售人员进行输入               |
  | Client.Member.Modify        | 在销售人员请求修改客户信息时，系统显示该客户编辑状态下的客户信息         |
  | Client.Member.Valid         | 在销售人员输入已有的客户编号时，系统显示该会员信息                |
  | Client.Member.Add           | 在销售人员请求增添客户时，系统自动为新客户生成编号                |
  | Client.Member.Delete        | 销售人员删除已有客户时，系统删除客户信息                     |
  | Client.Member.Delete.defeat | 在销售人员删除应收应付不为0的客户信息时，系统显示删除失败            |
  | Client.Member.List          | 在销售人员完成增添或删除操作后，系统更新客户列表                 |




#### 3.2.7 制定进货单

- **特性描述：**在供应商与公司完成协商，确定订单后，一个经过验证的进货人员开始制定进货单，完成进货商品相关信息的录入和储存；或者总经理审核进货单未通过，一个经过验证的进货人员修改进货单，完善进货单的相关信息。

- **优先级：**高

- **刺激／相应序列：**

  刺激：进货人员请求制定进货单
  响应：系统自动为该进货单生成编号

  刺激：进货人员输入进货商，仓库名称，操作员
  响应：系统保存进货人员输入信息

  刺激：进货人员请求添加商品
  响应：系统显示商品选择列表

  刺激：进货人员输入进货商品，填写商品数量，价格，备注
  响应：系统显示商品型号，计算价格

  刺激：进货人员选定草稿状态进货单
  响应：系统标记草稿进货单

  刺激：进货人员请求修改草稿进货单
  响应：系统显示可编辑状态的进货单信息

  刺激：进货人员请求删除草稿进货单
  响应：系统将该草稿进货单从列表里面删除

  刺激：进货人员退出编辑进货单
  响应：系统将该进货单以草稿状态保存

  刺激：进货人员未作修改直接提交进货单
  响应：系统提示修改进货单

  刺激：进货人员提交进货单
  响应：系统将进货单保存为提交状态

  刺激：进货人员确认提交进货单时有信息未填写
  响应：系统提示进货人员填写完所有信息并返回编辑界面

- **相关功能需求：**

  | 编号                           | 需求描述                                 |
  | ---------------------------- | ------------------------------------ |
  | Purchase.Input               | 系统允许进货人员在制定修改进货单时进行键盘输入              |
  | Purchase.Input.Information   | 进货人员输入供应商，仓库名称和备注，系统保存填写的相关信息        |
  | Purchase.Goods.List          | 进货人员选择商品时，系统显示商品选择列表                 |
  | Purchase.Goods               | 进货人员选择商品，输入商品数量，确认商品单价，系统显示商品型号并计算金额 |
  | Purchase.Order.Mark          | 进货人员选定草稿进货单时系统标记该进货单                 |
  | Purchase.Order.New           | 进货人员请求制定进货单时,系统自动为进货单生成编号            |
  | Purchase.Order.Modify        | 进货人员请求修改进货单时，系统显示可编辑状态的草稿进货单信息       |
  | Purchase.Order.Modify.Exit   | 进货人员在进货单编辑状态时退出，系统自动将该进货单保存为草稿状态     |
  | Purchase.Order.List          | 系统可显示草稿状态进货单                         |
  | Purchase.Order.Delete        | 进货人员删除草稿状态进货单时，系统将该草稿进货单从列表里移除       |
  | Purchase.Order.Submit        | 进货人员提交进货单时，系统将进货单设置为提交状态             |
  | Purchase.Order.Submit.Defeat | 进货人员提交进货单时有信息未填写，系统显示进货单提交失败         |




#### 3.2.8 制定进货退货单

- **特性描述：**在供应商与公司完成协商，确定订单后，一个经过验证的进货人员开始制定进货退货单，完成进货退货商品相关信息的录入和储存；或者总经理审核进货退货单未通过，一个经过验证的进货人员修改进货退货单，完善进货退货单的相关信息。

- **优先级：**高

- **刺激／相应序列：**

  刺激：进货人员请求制定进货退货单
  响应：系统自动为该进货退货单生成编号

  刺激：进货人员输入进货商，仓库名称，操作员
  响应：系统保存进货人员输入信息

  刺激：进货人员请求添加商品
  响应：系统显示商品选择列表

  刺激：进货人员输入进货退货商品，填写商品数量，价格，备注
  响应：系统显示商品型号，计算价格

  刺激：进货人员选定草稿状态进货退货单
  响应：系统标记草稿进货退货单

  刺激：进货人员请求修改草稿进货退货单
  响应：系统显示可编辑状态的进货退货单信息

  刺激：进货人员请求删除草稿进货退货单
  响应：系统将该草稿进货退货单从列表里面删除

  刺激：进货人员退出编辑进货退货单
  响应：系统将该进货退货单以草稿状态保存

  刺激：进货人员未作修改直接提交进货退货单
  响应：系统提示修改进货退货单

  刺激：进货人员提交进货退货单
  响应：系统将进货退货单保存为提交状态

  刺激：进货人员确认提交进货退货单时有信息未填写
  响应：系统提示进货人员填写完所有信息并返回编辑界面

- **相关功能需求：**

  | 编号                                       | 需求描述                                 |
  | ---------------------------------------- | ------------------------------------ |
  | Purchase Return.Input                    | 系统允许进货人员在制定修改进货退货单时进行键盘输入            |
  | Purchase Return.Input.Information        | 进货人员输入供应商，仓库名称和备注，系统保存填写的相关信息        |
  | Purchase Return.Goods.List               | 进货人员选择商品时，系统显示商品选择列表                 |
  | Purchase Return.Goods                    | 进货人员选择商品，输入商品数量，确认商品单价，系统显示商品型号并计算金额 |
  | Purchase Return.Order.Mark               | 进货人员选定草稿进货退货单时系统标记该进货退货单             |
  | Purchase Return.Order.New                | 进货人员请求制定进货退货单时,系统自动为进货退货单生成编号        |
  | Purchase Return.Order.Modify             | 进货人员请求修改进货退货单时，系统显示可编辑状态的草稿进货退货单信息   |
  | Purchase Return.Order.Modify.Exit        | 进货人员在进货退货单编辑状态时退出，系统自动将该进货退货单保存为草稿状态 |
  | Purchase Return.Order.List               | 系统可显示草稿状态进货退货单                       |
  | Purchase.Order.Delete                    | 进货人员删除草稿状态进货退货单时，系统将该草稿进货退货单从列表里移除   |
  | Purchase Return.Order.Submit             | 进货人员提交进货退货单时，系统将进货退货单设置为提交状态         |
  | Purchase Return.Order.Submit.Defeat      | 进货人员提交进货退货单时有信息未填写，系统显示进货退货单提交失败     |
  | Purchase Return.Order.Submit.Defeat.Modify | 进货人员未做任何修改直接确认提交,系统提示进货人员修改进货单       |

#### 3.2.9 制定销售单

- **特性描述：**客户完成订单时，一个经过验证的销售人员开始制定销售单，完成销售商品相关信息的记录和储存；或者总经理审核销售单未通过，一个经过验证的销售人员修改销售单，完善销售单的相关信息。

- **优先级：**高

- **刺激／相应序列：**

  刺激：销售人员请求制定销售单
  响应：系统为销售单生成编号

  刺激：销售人员选择客户，确认业务员和操作员，填写仓库名称
  响应：系统记录客户ID，业务员，操作员和仓库名称

  刺激：销售人员请求添加商品
  响应：系统显示商品选择列表

  刺激：销售人员选择商品并输入数量，确认价格，填写备注
  响应：系统显示商品型号并计算商品价格

  刺激：销售人员输入折让前总额，折让，代金券额度，填写备注
  响应：系统保存销售人员所输入信息

  刺激：销售人员确认提交销售单
  响应：系统将销售单设置为提交状态

  刺激：销售人员请求修改草稿状态的销售单
  响应：系统显示可编辑状态的销售单信息

  刺激：销售人员请求删除草稿销售单
  响应：系统将销售单从草稿销售单列表删除

  刺激：销售人员退出编辑销售单
  响应：系统将该销售单以草稿状态保存

  刺激：销售人员未作修改直接提交销售单
  响应：系统提示修改销售单

  刺激：销售人员提交销售单时有信息未填写
  响应：系统提示销售人员完善销售单

- **相关功能需求：**

  | 编号                                    | 需求描述                                     |
  | ------------------------------------- | ---------------------------------------- |
  | Sales.Input                           | 系统允许销售人员在制定销售单时进行键盘输入                    |
  | Sales.Input.Information               | 销售人员输入业务员，操作员名称或ID，客户ID，折让金额，代金券额度，折让前总额，折让后总额，系统保存填写的相关信息 |
  | Sales.Goods                           | 系统显示选择商品的信息                              |
  | Sales.Goods.Amount                    | 销售人员输入商品数量和价格时系统计算商品价格                   |
  | Sales.Goods.List                      | 系统显示商品列表                                 |
  | Sales.Order.New                       | 销售人员请求制定销售单时,系统自动为销售单生成编号                |
  | Sales.Order.Modify                    | 销售人员请求修改销售单时，系统显示可编辑状态的草稿销售单信息           |
  | Sales.Order.Modify.Exit               | 销售人员在销售单编辑状态时退出，系统自动将该销售单保存为草稿状态         |
  | Sales.Order.Delete                    | 进货人员删除草稿状态销售单时，系统将该草稿销售单从列表里移除           |
  | Sales.Order.List                      | 销售人员请求查看草稿状态销售单列表时，系统显示草稿状态的销售单列表        |
  | Sales.Order.Submit                    | 销售人员提交销售单时，系统将销售单设置为提交状态                 |
  | Sales.Order.Submit.Defeat.Information | 销售人员提交信息未填写完整的销售单，系统提示销售人员完善销售单          |
  | Sales.Order.Submit.Defeat.Modify      | 销售人员未做任何修改直接提交销售单，系统提示销售人员修改销售单          |

#### 3.2.10 制定销售退货单

- **特性描述：**客户完成退货订单时，一个经过验证的销售人员开始制定销售退货单，完成销售退货商品相关信息的记录和储存；或者总经理审核销售退货单未通过，一个经过验证的销售人员修改销售退货单，完善销售退货单的相关信息。

- **优先级：**高

- **刺激／相应序列：**

  刺激：销售人员请求制定销售退货单
  响应：系统为销售退货单生成编号

  刺激：销售人员选择客户，确认业务员和操作员
  响应：系统记录客户ID，业务员和操作员信息

  刺激：销售人员请求选择商品
  响应：销售人员显示商品选择列表

  刺激：销售人员选择商品并输入数量，价格和备注
  响应：系统显示商品型号并计算商品价格

  刺激：销售人员提交销售退货单
  响应：系统将销售退货单设置为提交状态

  刺激：销售人员请求修改草稿状态的销售退货单
  响应：系统显示可编辑状态的销售退货单信息

  刺激：销售人员请求删除草稿销售退货单
  响应：系统将销售退货单从草稿销售退货单列表删除

  刺激：销售人员退出编辑销售退货单
  响应：系统将该销售退货单以草稿状态保存

  刺激：销售人员未作修改直接提交销售退货单
  响应：系统提示修改销售退货单

- **相关功能需求：**

  | 编号                                       | 需求描述                                  |
  | ---------------------------------------- | ------------------------------------- |
  | Sales Return.Input                       | 系统允许销售人员在制定销售退货单时进行键盘输入               |
  | Sales Return.Input.Information           | 销售人员输入业务员，操作员名称或ID，客户ID，系统保存填写的相关信息   |
  | Sales Return.Goods                       | 系统显示选择商品的信息                           |
  | Sales Return.Goods.Amount                | 销售人员输入商品数量和价格时，系统计算金额                 |
  | Sales Return.Goods.List                  | 系统显示商品列表                              |
  | Sales Return.Order.New                   | 销售人员请求制定销售退货单时,系统自动为销售退货单生成编号         |
  | Sales Return.Order.Modify                | 销售人员请求修改销售退货单时，系统显示可编辑状态的草稿销售退货单信息    |
  | Sales Return.Order.Modify.Exit           | 销售人员在销售退货单编辑状态时退出，系统自动将该销售退货单保存为草稿状态  |
  | Sales Return.Order.Delete                | 进货人员删除草稿状态销售退货单时，系统将该草稿销售退货单从列表里移除    |
  | Sales Return.Order.List                  | 销售人员请求查看草稿状态销售退货单列表时，系统显示草稿状态的销售退货单列表 |
  | Sales Return.Order.Submit                | 销售人员提交销售退货单时，系统将销售退货单设置为提交状态          |
  | Sales Return.Order.Submit.Defeat.Information | 销售人员提交销售退货单时有信息未填写，系统提示销售人员完善信息       |
  | Sales Return.Order.Submit.Defeat.Modify  | 销售人员未做任何修改直接提交销售退货单，系统提示销售人员修改销售单     |

#### 3.2.11 银行账户管理

- **特性描述：**一个经过验证并授予最高权限的财务人员需要增加银行账户、删除银行账户、修改银行账户属性或查询银行账户。

- **优先级：**高

- **刺激／相应序列：**
  - 刺激：财务人员请求增加一个银行账户，
  - 响应：系统提示财务人员输入该账户的卡号、名称、余额
  - 刺激：财务人员输入该账户的合法的卡号、名称、余额，并提交
  - 响应：系统在银行账户列表中增加一个银行账户，更新银行账户列表的信息显示
  - 刺激：财务人员给该账户输入已存在的银行卡号并提交
  - 响应：系统要提示银行卡号重复，请重新输入
  - 刺激：财务人员给该账户输入已存在的账户名称并提交
  - 响应：系统要提示账户名称重复，请重新输入
  - 刺激：财务人员给该账户输入负数余额并提交
  - 响应：系统要提示余额异常请重新输入
  - 刺激：财务人员请求查询账户
  - 响应：系统显示银行账户列表
  - 刺激：财务人员输入部分连续的银行卡号或账户名称并确认搜素
  - 响应：系统显示匹配的银行账户列表，列表的每一条包括账户名称，银行卡号 
  - 刺激：财务人员选中欲查询的银行账户，执行查询操作
  - 响应：系统显示该银行账户的详细信息，包括银行账户名称，银行卡号和账户余额
  - 刺激：财务人员选中欲删除的银行账户，执行删除操作
  - 响应：系统提示是否删除该银行账户
  - 刺激：财务人员确认删除操作
  - 响应：系统删除该银行账户，系统更新银行账户列表的信息显示
  - 刺激：财务人员选中修改除的银行账户
  - 响应：系统提示执行修改操作
  - 刺激：财务人员执行修改操作并确认
  - 响应：系统修改该银行账户，系统更新银行账户列表的信息显示

- **相关功能需求**：

  | 功能需求名称                      | 功能需求描述                                   |
  | --------------------------- | ---------------------------------------- |
  | BankAccount.New             | 在财务人员请求添加一个银行账户时，系统要打开输入界面，允许财务人员输入该账户的卡号、名称、余额并提交 |
  | BankAccount.New.Valid       | 如果财务人员提交的卡号、名称、余额合法，系统要在银行账户列表中增加一个银行账户，并更新银行账户列表的信息显示 |
  | BankAccount.New.Invalid     | 如果财务人员提交的卡号、名称、余额不合法，系统要提示用户输入不合法请重新输入   |
  | BankAccount.New.Cancel      | 在财务人员请求取消提交时，系统要关闭输入界面，并舍弃界面中已有的输入       |
  | BankAccount.Search          | 在财务人员请求查询账户时，系统要显示银行账户列表，要允许财务人员输入部分连续的银行卡号或账户名称进行搜索 |
  | BankAccount.Search.Found    | 在财务人员输入部分连续的银行卡号或账户名称并确认搜索时，若有匹配的结果，系统要显示匹配的银行账户列表，要允许财务人员继续再次搜索 |
  | BankAccount.Search.NotFound | 在财务人员输入部分连续的银行卡号或账户名称并确认搜索时，若无匹配的结果，系统要提示未找到结果，要允许财务人员继续再次搜索 |
  | BankAccount.Info            | 在财务人员选中一个银行账户时，系统要显示该银行账户的详细信息           |
  | BankAccount.Del             | 在财务人员选中一个银行账户并执行删除操作，系统要提示是否删除该银行账户      |
  | BankAccount.Del.Confirm     | 在财务人员确认删除操作时，系统删除该账户，提示删除成功并更新银行账户列表的信息显示 |
  | BankAccount.Del.Cancel      | 在财务人员取消删除操作时，系统不删除该账户                    |
  | BankAccount.Edit            | 在财务人员选中一个银行账户并执行修改除操作，系统要打开输入界面，允许财务人员修改该账户的卡号、名称、余额 |
  | BankAccount.Edit.Confirm    | 在财务人员执行修改操作并确认后，系统要关闭输入界面啊，并更新银行账户列表的信息显示 |
  | BankAccount.Edit.Cancel     | 在财务人员取消修改操作时，系统不修改该账户的信息，关闭输入界面啊         |




------

#### 3.2.12 制定收款付款单

- **特性描述：**一个经过验证的财务人员处理一个已经注册的客户发起付款，发起收款或公司向其发起付款，或提交的收款付款单审批不通过时进行修改

- **优先级：**高

- **刺激／相应序列：**

  - 刺激：财务人员请求新建收款付款单草稿
  - 响应：系统新建收款付款单草稿，自动生成单据编号 ，自动填写当前操作员 ，并保存草稿。
  - 刺激：财务人员选择客户（供应商） 或客户（销售商） ，并填写转账列表 （转账列表中的每一条包含：收钱付钱的银行账户，转账金额，备注）之后提交
  - 响应：系统自动计算总额，提交新表，提示提交成功
  - 刺激：财务人员未完成选择客户（供应商） 或客户（销售商） ，并填写转账列表就提交
  - 响应：系统要保存草稿，并提示草稿已保存
  - 刺激：财务人员选择草稿箱中的一条草稿，执行编辑操作
  - 响应：系统打开输入界面，允许财务人员修改收款付款单
  - 刺激：财务人员修改收款付款单，并点击提交
  - 响应：系统自动计算总额，提交新表，提示提交成功
  - 刺激：财务人员选择草稿箱中的一条草稿，执行删除操作
  - 响应：系统提示是否删除该草稿
  - 刺激：财务人员确认删除操作
  - 响应：系统删除该草稿，系统更新草稿箱的信息显示

- **相关功能需求**：

  | 功能需求名称            | 功能需求描述                                   |
  | ----------------- | ---------------------------------------- |
  | Bill.New          | 在财务人员请求新建收款付款单草稿时，系统要打开输入界面，新建并保存收款付款单草稿，自动生成单据编号 ，自动填写当前操作员 ，允许财务人员财务人员选择客户（供应商） 或客户（销售商） ，并填写转账列表 （转账列表中的每一条包含：收钱付钱的银行账户，转账金额，备注）之后提交 |
  | Bill.New.Exit     | 如果财务人员未提交退出编辑，系统要关闭输入界面，保存草稿，并提示草稿已保存    |
  | Bill.New.Invalid  | 如果财务人员提交付款单草稿时账户余额不足，系统要提示用户账户余额不足，提交失败  |
  | Bill.New.Submit   | 在财务人员点击提交收款付款单草稿后，若账户余额足够，系统要自动计算总额，提交新表，提示提交成功 |
  | Bill.Del          | 在财务人员选中一个是收款付款单草稿并执行删除操作，系统要提示是否删除该银行账户  |
  | Bill.Del.Confirm  | 在财务人员确认删除操作时，系统删除该账户，提示删除成功并更新银行账户列表的信息显示 |
  | Bill.Del.Cancel   | 在财务人员取消删除操作时，系统不删除该账户                    |
  | Bill.Edit         | 在财务人员选中一个草稿并执行修改除操作，系统要打开输入界面，允许财务人员修改客户（供应商） 或客户（销售商） ，并修改转账列表 （转账列表中的每一条包含：收钱付钱的银行账户，转账金额，备注）之后提交 |
  | Bill.Edit.Exit    | 如果财务人员未提交退出编辑，系统要关闭输入界面，保存草稿，并提示草稿已保存    |
  | Bill.Edit.Invalid | 如果财务人员提交付款单草稿时账户余额不足，系统要提示用户账户余额不足，提交失败  |
  | Bill.Edit.Submit  | 在财务人员点击提交收款付款单草稿后，若账户余额足够，系统要自动计算总额，提交新表，提示提交成功 |


------

#### 3.2.13 制定现金费用单

- **特性描述：**一个经过验证的的财务人员管理报销等现金操作，或提交的现金费用单审批不通过时进行修改

- **优先级：**高

- **刺激／相应序列：**

  - 刺激：财务人员请求新建收款付款单草稿
  - 响应：系统新建收款付款单草稿，自动生成单据编号 ，自动填写当前操作员 ，并保存草稿。
  - 刺激：财务人员选择客户（供应商） 或客户（销售商） ，并填写转账列表 （转账列表中的每一条包含：收钱付钱的银行账户，转账金额，备注）之后提交
  - 响应：系统自动计算总额，提交新表，提示提交成功
  - 刺激：财务人员未完成选择客户（供应商） 或客户（销售商） ，并填写转账列表 （转账列表中的每一条包含：收钱付钱的银行账户，转账金额，备注）就提交
  - 响应：系统要保存草稿，并提示草稿已保存
  - 刺激：财务人员选择草稿箱中的一条草稿，执行编辑操作
  - 响应：系统打开输入界面，允许财务人员修改收款付款单
  - 刺激：财务人员修改收款付款单，并点击提交
  - 响应：系统自动计算总额，提交新表，提示提交成功
  - 刺激：财务人员选择草稿箱中的一条草稿，执行删除操作
  - 响应：系统提示是否删除该草稿
  - 刺激：财务人员确认删除操作
  - 响应：系统删除该草稿，系统更新草稿箱的信息显示

- **相关功能需求**：

  | 功能需求名称            | 功能需求描述                                   |
  | ----------------- | ---------------------------------------- |
  | Cash.New          | 在财务人员请求新建现金费用单草稿时，系统要打开输入界面，新建并保存现金费用单草稿，自动生成单据编号 ，自动填写当前操作员 ，允许财务人员财务人员选择付钱的银行账户，并填写条目清单。（条目清单中的每一条包含：付钱的条目名，金额，备注）之后提交 |
  | Cash.New.Exit     | 如果财务人员未提交退出编辑，系统要关闭输入界面，保存草稿，并提示草稿已保存    |
  | Cash.New.Invalid  | 如果财务人员提交现金费用单草稿时账户余额不足，系统要提示用户账户余额不足，提交失败 |
  | Cash.New.Submit   | 在财务人员点击提交现金费用单草稿后，若账户余额足够，系统要自动计算总额，提交新表，提示提交成功 |
  | Cash.Del          | 在财务人员选中一个现金费用单草稿并执行删除操作，系统要提示是否删除该现金费用单草稿 |
  | Cash.Del.Confirm  | 在财务人员确认删除操作时，系统删除该账户，提示删除成功并更新现金费用单草稿    |
  | Cash.Del.Cancel   | 在财务人员取消删除操作时，系统不删除该现金费用单草稿               |
  | Cash.Edit         | 在财务人员选中一个草稿并执行修改除操作，系统要打开输入界面，允许财务人员财务人员选择付钱的银行账户，并填写条目清单。（条目清单中的每一条包含：付钱的条目名，金额，备注）之后提交 |
  | Cash.Edit.Exit    | 如果财务人员未提交退出编辑，系统要关闭输入界面，保存草稿，并提示草稿已保存    |
  | Cash.Edit.Invalid | 如果财务人员提交现金费用单草稿时账户余额不足，系统要提示用户账户余额不足，提交失败 |
  | Cash.Edit.Submit  | 在财务人员点击提交收款付款单草稿后，若账户余额足够，系统要自动计算总额，提交新表，提示提交成功 |

---

#### 3.2.14 查看、导出销售明细

- **特性描述：**一个经过验证的财务人员或总经理想要了解公司的销售状况

- **优先级：**高

- **刺激／相应序列：**

  - 刺激：财务人员或总经理请求查看销售明细
  - 响应：系统自动展示时间区间近15天的商品销售记录列表（列表的每一条包含年月日，商品名，型号，数量，单价，总额 ），并允许财务人员选择时间区间，商品名，客户，业务员，仓库的一种或几种作为筛选条件
  - 刺激：财务人员或总经理选择时间区间，商品名，客户，业务员，仓库的一种或几种作为筛选条件之后提交。
  - 响应：系统自动展示匹配的的商品销售记录列表
  - 刺激：财务人员或总经理执行导出销售明细表操作
  - 响应：系统导出所展示的销售明细表，并提示导出成功
- 相关功能需求

| 功能需求名称                    | 功能需求描述                                   |
| ------------------------- | ---------------------------------------- |
| SalesDetails.Check        | 在财务人员或总经理请求查看销售明细时，系统要自动展示时间区间近15天的商品销售记录列表（列表的每一条包含年月日，商品名，型号，数量，单价，总额 ），并允许财务人员选择时间区间，商品名，客户，业务员，仓库的一种或几种作为筛选条件 |
| SalesDetails.Check.Filter | 在财务人员或总经理选择时间区间，商品名，客户，业务员，仓库的一种或几种作为筛选条件之后提交后，系统要自动展示匹配的的商品销售记录列表，并允许财务人员货或总经理就修改筛选条件 |
| SalesDetails.Export       | 在财务人员或总经理执行导出销售明细表操作后，系统导出所展示的销售明细表成功，提示导出成功 |
| SalesDetails.Export.Fail  | 在财务人员或总经理执行导出销售明细表操作后，系统导出所展示的销售明细表失败，提示导出失败 |

---

#### 3.2.15 查看、导出经营历程与红冲

- **特性描述：**一个经过验证的财务人员或总经想要了解公司的经营历程；或一个经过验证的财务人员需要红冲之前的单据

- **优先级：**高

- **刺激／相应序列：**

  - 刺激：财务人员或总经理请求查看经营历程
  - 响应：系统自动展示时间区间近7天，单据类型为销售类的单据列表，并允许财务人员先选择单据类型，再选择时间区间，客户，业务员，仓库的一种或几种作为筛选条件（单据类型即销售类，进货类，财务类和库存类）
  - 刺激：财务人员先选择单据类型，再选择时间区间，客户，业务员，仓库的一种或几种作为筛选条件并提交
  - 响应：系统自动展示匹配的单据列表
  - 刺激：财务人员或总经理执行导出经营历程操作
  - 响应：系统导出所展示的单据列表，并提示导出成功
  - 刺激：财务人员右击一条历史单据，选择红冲
  - 响应：系统提示是否红冲
  - 刺激：财务人员确认红冲
  - 响应：系统生成与选中项一模一样，但仅仅把数量取负数的单子，并入账，并提示红冲成功
  - 刺激：财务人员右击一条历史单据，选择红冲并复制
  - 响应：系统生成与选中项一模一样，但仅仅把数量取负数的单据A，和另一张与选中项一模一样的单据B，并允许财务人员编辑单据B后提交
  - 刺激：财务人员修改上述单据B后提交
  - 响应：系统提示是否红冲并复制
  - 刺激：财务人员确认红冲并复制
  - 响应：系统将上述单据A和单据B入账
- 相关功能需求

| 功能需求名称                                   | 功能需求描述                                   |
| ---------------------------------------- | ---------------------------------------- |
| BusinessProgress.Check                   | 在财务人员或总经理请求查看经营历程时，系统自动展示时间区间近7天，单据类型销售类的单据列表，并允许财务人员先选择单据类型，再选择时间区间，客户，业务员，仓库的一种或几种作为筛选条件 |
| BusinessProgress.Check.Filter            | 在财务人员或总经先选择单据类型，再选择时间区间，客户，业务员，仓库的一种或几种作为筛选条件之后提交后，系统要自动展示匹配的的单据列表，并允许财务人员货或总经理就修改筛选条件 |
| BusinessProgress.Export                  | 在财务人员或总经理执行导出经营历程表操作后，系统导出所展示的销售明细表成功，提示导出成功 |
| BusinessProgress.Export.Fail             | 在财务人员或总经理执行导出经营历程表操作后，系统导出所展示的销售明细表失败，提示导出失败 |
| BusinessProgress.Writeback               | 在财务人员选中一条历史单据，选择红冲后，系统要提示是否红冲            |
| BusinessProgress.Writeback.Confirm       | 在财务人员确认红冲后，系统生成与选中项一模一样，但仅仅把数量取负数的单子，并入账，并提示红冲成功 |
| BusinessProgress.Writeback.Cancel        | 在财务人员取消红冲后，系统不做任何改动                      |
| BusinessProgress.WritebackAndCopy        | 在财务人员选中一条历史单据，选择红冲并复制后，系统生成与选中项一模一样，但仅仅把数量取负数的单据A，和另一张与选中项一模一样的单据B，打开输入界面，并允许财务人员编辑单据B后提交 |
| BusinessProgress.WritebackAndCopy.Submit | 在财务人员修改上述单据B后提交后，系统要提示是否要红冲并复制           |
| BusinessProgress.WritebackAndCopy.Confirm | 在财务人员确认红冲并复制后，系统将上述单据A和单据B入账，并提示红冲并复制成功  |
| BusinessProgress.WritebackAndCopy.Cancel | 在财务人员取消红冲并复制后，系统将删除单据A和单据B               |

---

####   3.2.16 查看、导出经营情况

- **特性描述：**一个经过验证的财务人员或总经理想要了解公司的经营状况

- **优先级：**高

- **刺激／相应序列：**

  - 刺激：财务人员或总经理请求查看经营状况
  - 响应：系统自动展示时间区间近7天、收支类型利润类的经营情况表 。（收支类型即收入类，支出类，利润类）
    - 收入类列表的每一条包含销售收入 、折让后总收入、折让总额和 商品类收入 （ 商品报溢收入、进货退货差价和 代金券与实际收款差额收入） 。
    - 支出类列表的每一条包含销售成本、总支出和商品类支出（商品报损、商品赠出）。
    - 利润类列表：折让后总收入 - 总支出= 总利润 。
  - 刺激：财务人员或总经理先选择不同的收支类型，再选择时间区间作为筛选条件之后提交。
  - 响应：系统自动展示匹配的的经营情况表
  - 刺激：财务人员或总经理执行导出销售明细表操作
  - 响应：系统导出所展示的销售明细表，并提示导出成功
- 相关功能需求

| 功能需求名称                         | 功能需求描述                                   |
| ------------------------------ | ---------------------------------------- |
| BusinessSituation.Check        | 在财务人员或总经理请求查看销售明细时，系统要自动展示时间区间近7天、收支类型利润类的经营情况表（列表的每一条参见上方的[刺激/响应序列]() ），并允许财务人员或总经理依次选择收支类型和时间区间作为筛选条件 |
| BusinessSituation.Check.Filter | 在财务人员或总经理选择时间区间，商品名，客户，业务员，仓库的一种或几种作为筛选条件之后提交后，系统要自动展示匹配的的商品销售记录列表，并允许财务人员货或总经理就修改筛选条件 |
| BusinessSituation.Export       | 在财务人员或总经理执行导出销售明细表操作后，系统导出所展示的销售明细表成功，提示导出成功 |
| BusinessSituation.Export.Fail  | 在财务人员或总经理执行导出销售明细表操作后，系统导出所展示的销售明细表失败，提示导出失败 |


#### 3.2.17 期初建账

- **特性描述：**这个系统可以建立多套账，每套账在新建的时候都要经过财务人员的期初建账这一环节，即每套账都需要进行期初的初始化操作。期初信息需要包括商品信息、客户信息、银行账户信息。期初信息一旦建立完毕就会单独存储起来，同时将此信息作为系统的启动初始状态，之后的操作不会改变期初信息，且期初信息随时可查。
- **优先级：**高
- **刺激／相应序列：**

  - 刺激：财务人员请求发起期初建账。
  - 响应：系统应该自动从库存数据中取出上一年末的商品和商品分类，展示并全选商品列表和商品分类列表的每一条
  - 刺激：财务人员取消选中这一财年不需要的商品分类或商品，并点击下一步。
  - 响应：系统记录不需要的商品分类或商品；系统应该自动从客户数据中取出上一年末的所有客户，展示并全选客户列表的每一条
  - 刺激：财务人员取消选中这一财年不需要的客户，并点击下一步。
  - 响应：系统记录不需要的客户；系统应该自动从客户数据中取出上一年末的所有银行账户，展示并全选银行账户列表的每一条
  - 刺激：财务人员取消选中这一财年不需要的银行账户，并点击完成。
  - 响应：系统记录不需要的银行账户；系统根据以上选中的商品分类及商品、客户和银行账户自动生成期初信息。
  - 刺激：财务人员请求查看期初信息，并选择年份及查看类型（商品、客户、银行账户）。
  - 响应：系统显示相应的期初信息列表。
- **相关功能需求：**

| 需求名称                 | 需求描述                                     |
| -------------------- | ---------------------------------------- |
| Book.Goods.Get       | 在财务人员发起期初建账时，系统应该自动从库存数据中取出上一年末的商品和商品分类，展示并全选商品列表（每一条包括一个复选框、商品名称和商品id）和商品分类列表（每一条包括一个复选框）的每一条 |
| Book.Goods.Confirm   | 财务人员取消选中这一财年不需要的商品分类或商品，选择下一步； 系统记录不需要的商品分类或商品 |
| Book.Client.Get      | 财务人员选完不需要的商品或商品分类，点击下一步，系统应该自动从客户数据中取出上一年末的所有客户，展示并全选客户列表（每一条包括一个复选框和客户名称）的每一条 |
| Book.Client.Confirm  | 财务人员取消选中这一财年不需要的客户，点击下一步；系统记录不需要的客户      |
| Book.Account.Get     | 财务人员选完不需要的客户并点击下一步，系统应该自动从客户数据中取出上一年末的所有银行账户，展示并全选银行账户列表（每一条包括一个复选框、账户名称、银行卡号和账户余额）的每一条 |
| Book.Account.Confirm | 财务人员取消选中这一财年不需要的银行账户，点击完成；系统记录不需要的银行账户，并根据之前的记录导入需要的商品、客户和银行账户信息，提示"期初建账完成" |
| Book.Info            | 在财务人员请求查看期初信息,并选择年份及查看类型（商品、客户、银行账户）时，系统应该显示相应的起初信息列表（参见`上课鱼`） |



#### 3.2.18 审批单据

- **特性描述**：在系统的使用过程中，会有其他用户进行不同种类单据的制定，所有单据都要提交到总经理处进行审批。所有单据都有草稿状态、提交状态、通过状态。总经理每天查看所有申请单据，修改单据数据，并通过或驳回该单据。总经理可以批量审批。

- **优先级：**高

- **刺激／响应策略：**

  刺激：总经理刷新单据列表。
  响应：系统显示所有单据。

  刺激：总经理选择一张单据进行审批。
  响应：系统显示完整单据。

  刺激：总经理修改单据数据。

  响应：系统显示修改结果。

  刺激：总经理保存修改。

  响应：系统显示修改成功。

  刺激：总经理输入的修改金额为负。

  响应：系统提示金额不能为负并提示重新输入。

  刺激：总经理未保存修改便退出界面。

  响应：系统提示修改未保存，并询问是否保存。

  刺激：总经理选择不保存修改。

  响应：系统返回原单据界面。

  刺激：总经理选择多张单据。

  响应：系统显示选中单据。
  =======
  响应：系统显示修改结果并保存。
  刺激：总经理确定审批结果，审批结果包括通过和不通过。
  响应：系统提示审批完成，并更新提交单据列表。


- **相关功能需求：**

| 需求名称                        | 需求描述                                     |
| --------------------------- | ---------------------------------------- |
| Doc.Info                    | 总经理查看所有单据时，系统显示所有已提交单据                   |
| Doc.Info.CompletedInfo      | 总经理选择某一张单据进行审批时，系统显示完整的单据信息              |
| Doc.Info.Selected           | 总经理选择多张单据时，系统显示选中的多张单据                   |
| Doc.Examine.Modify          | 系统应该允许总经理修改单据                            |
| Doc.Examine.Modify.Input    | 系统应该允许总经理输入修改的价格折让信息                     |
| Doc.Examine.Modify.Save     | 总经理完成修改并确认保存时，系统提示修改成功并更新单据信息            |
| Doc.Examine.Modify.Not-save | 总经理完成修改并未保存时，系统返回原单据                     |
| Doc.Examine.Modify.Invalid  | 总经理输入的折让金额为负时，系统提示金额不能为负并提示重新输入          |
| Doc.Examine.Result          | 系统应该允许总经理确认审批结果                          |
| Doc.Examine.Result.Pass     | 在总经理确认审批结果为通过时，系统应该提示审批完成，并更新提交单据列表      |
| Doc.Examine.Result.Not-pass | 在总经理确认审批结果为不通过时，系统应该将单据改为草稿状态，并给操作员发送消息，提示单据被驳回 |
| Doc.Update                  | 系统更新单据列表                                 |



#### 3.2.19 制定促销策略

- **特性描述**：在需要进行商品促销时，一个经过验证的总经理可以制定或移除促销策略，系统更新调整后的促销策略。总经理可以制定用户回馈促销、组合降价促销、总额赠送促销三种策略，所有赠送条件触发后，系统会自动建立库存赠送单。

- **优先级：**高

- **刺激／响应策略：**

  刺激：总经理选择新增促销策略的类型

  刺激：总经理新增促销策略

  刺激：总经理输入客户级别

  响应：系统显示已选级别

  刺激：总经理请求输入赠送商品

  响应：系统显示商品层次列表

  刺激：总经理选择商品并确认

  响应：系统显示已选商品

  刺激：总经理输入赠送数量

  响应：系统显示赠送数量

  刺激：总经理输入的赠送数量为负或不为整数

  响应：系统提示赠送数量不能为负或必须为整数并提示重新输入

  刺激：总经理输入促销策略的起止日期

  响应：系统显示选定日期

  刺激：总经理输入的开始日期晚于当天日期+30天，或结束日期晚于开始日期+30天

  响应：系统提示开始时间必须在一个月内，并且持续时间不能超过一个月，并提示重新输入

  刺激：总经理确认添加赠送商品

  响应：系统显示赠送商品列表

  刺激：总经理输入折让金额

  响应：系统显示折让金额

  刺激：总经理输入的折让金额为负

  响应：系统提示折让金额不能为负并提示重新输入

  刺激：总经理确认添加价格折让优惠

  响应：系统显示折让信息列表

  刺激：总经理输入赠券金额

  响应：系统显示赠券金额

  刺激：总经理输入的赠券金额为负或不为整数

  响应：系统提示赠券金额不能为负或必须为整数并提示重新输入

  刺激：总经理输入赠券数量

  响应：系统显示赠券数量

  刺激：总经理输入的赠券数量为负或不为整数

  响应：系统提示赠送数量不能为负或必须为整数并提示重新输入

  刺激：总经理输入组合包名称

  响应：系统显示组合包名称

  刺激：总经理输入的组合包名称已存在

  响应：系统提示名称已存在并提示重新输入

  刺激：总经理输入组合包促销价格

  响应：系统显示促销价格

  刺激：总经理输入的促销价格为负

  响应：系统提示促销价格不能为负并提示重新输入

  刺激：总经理输入总额额度

  响应：系统显示输入额度

  刺激：总经理输入的总额额度为负

  响应：系统提示总额额度不能为负并提示重新输入

  刺激：总经理删除一个已有促销策略
  响应：系统将该促销策略从促销策略列表中移除

  刺激：总经理确认完成促销策略制定
  响应：系统更新促销策略信息，关闭制定促销策略任务


- **相关功能需求：**


| 需求名称                                     | 需求描述                                     |
| ---------------------------------------- | ---------------------------------------- |
| Strategy.Select                          | 在总经理进入策略制定界面，并请求制定一个促销策略时，系统显示三种策略供总经理选择 |
| Strategy.New                             | 在选择了策略类型后，系统应该允许总经理新增促销策略                |
| Strategy.Delete                          | 在总经理请求移除已有的促销策略时，系统在促销列表中移除制定的促销策略       |
| Strategy.Input                           | 系统应该允许总经理在制定促销策略时进行键盘输入                  |
| Strategy.Input.Member                    | 系统应该允许总经理输入客户回馈策略的信息                     |
| Strategy.Input.Member.StartTime          | 在制定客户回馈策略时，系统应该允许总经理输入客户回馈策略的开始时间        |
| Strategy.Input.Member.EndTime            | 在制定客户回馈策略时，系统应该允许总经理输入客户回馈策略的结束时间        |
| Strategy.Input.Member.Level              | 系统应该允许总经理选择客户等级，并进行进一步的策略制定              |
| Strategy.Input.Member.Gift               | 在制定客户回馈策略时，系统应该允许总经理输入赠品信息               |
| Strategy.Input.Member.Gift.Good          | 在制定客户回馈策略时，系统应该允许总经理输入赠送商品               |
| Strategy.Input.Member.Gift.Amount        | 在制定客户回馈策略时，系统应该允许总经理输入赠品数量               |
| Strategy.Input.Member.Discount           | 在制定客户回馈策略时，系统应该允许总经理输入折让信息               |
| Strategy.Input.Member.Discount.Money     | 在制定客户回馈策略时，系统应该允许总经理输入折让金额               |
| Strategy.Input.Member.Voucher            | 在制定客户回馈策略时，系统应该允许总经理输入代金券信息              |
| Strategy.Input.Member.Voucher.Money      | 在制定客户回馈策略时，系统应该允许总经理输入代金券金额              |
| Strategy.Input.Member.Voucher.Amount     | 在制定客户回馈策略时，系统应该允许总经理输入代金券数量              |
| Strategy.Input.Member.Voucher.ValidStartTime | 在制定客户回馈策略时，系统应该允许总经理输入代金券有效的开始时间         |
| Strategy.Input.Member.Voucher.ValidEndTime | 在制定客户回馈策略时，系统应该允许总经理输入代金券有效的结束时间         |
| Strategy.Input.Package                   | 系统应该允许总经理输入组合降价策略的信息                     |
| Strategy.Input.Package.Good              | 在制定组合降价策略时，系统应该允许总经理输入组合包中各个商品的信息        |
| Strategy.Input.Package.Good.Amount       | 在制定组合降价策略时，系统应该允许总经理输入组合包中各个商品的数量        |
| Strategy.Input.Package.Name              | 在制定组合降价策略时，系统应该允许总经理输入组合包名称              |
| Strategy.Input.Package.StartTime         | 在制定组合降价策略时，系统应该允许总经理输入组合包生效开始时间          |
| Strategy.Input.Package.EndTime           | 在制定组合降价策略时，系统应该允许总经理输入组合包生效结束时间          |
| Strategy.Input.Sum                       | 系统应该允许总经理输入总额赠送策略的信息                     |
| Strategy.Input.Sum.StartTime             | 在制定总额赠送策略时，系统应该允许总经理输入策略的开始时间            |
| Strategy.Input.Sum.EndTime               | 在制定总额赠送策略时，系统应该允许总经理输入策略的结束时间            |
| Strategy.Input.Sum.Gift                  | 在制定总额赠送策略时，系统应该允许总经理输入赠品信息               |
| Strategy.Input.Sum.Gift.Good             | 在制定总额赠送策略时，系统应该允许总经理输入赠送商品               |
| Strategy.Input.Sum.Gift.Amount           | 在制定总额赠送策略时，系统应该允许总经理输入赠品数量               |
| Strategy.Input.Sum.Voucher               | 在制定总额赠送策略时，系统应该允许总经理输入代金券信息              |
| Strategy.Input.Sum.Voucher.Money         | 在制定总额赠送策略时，系统应该允许总经理输入代金券金额              |
| Strategy.Input.Sum.Voucher.Amount        | 在制定总额赠送策略时，系统应该允许总经理输入代金券数量              |
| Strategy.Input.Sum.Voucher.ValidStartTime | 在制定总额赠送策略时，系统应该允许总经理输入代金券有效的开始时间         |
| Strategy.Input.Sum.Voucher.ValidEndTime  | 在制定总额赠送策略时，系统应该允许总经理输入代金券有效的结束时间         |
| Strategy.Confirm                         | 系统应该自动确认输入的一组信息                          |
| Strategy.Confirm.GiftList                | 在总经理输入一条赠品信息后，系统应该确认后显示赠品信息列表            |
| Strategy.Confirm.DiscountList            | 在总经理输入一条价格折让信息后，系统应该确认后显示折让信息列表          |
| Strategy.Confirm.VoucherList             | 在总经理输入一条赠券信息后，系统应该确认后显示赠券信息列表            |
| Strategy.Confirm.Valid                   | 系统应该自动验证每个促销策略总经理输入的数据的完整性               |
| Strategy.Confirm.Valid.Amount            | 在数量为负或不为整数时，系统提示数量不能为负并且必须为整数，并提示重新输入    |
| Strategy.Confirm.Valid.Money             | 在金额为负时，系统提示金额不能为负，并提示重新输入                |
| Strategy.Confirm.Valid.Voucher.Money     | 在代金券金额为负或不为整数时，系统提示代金券金额不能为负并且必须为整数，并提示重新输入 |
| Strategy.Confirm.Valid.StartTime         | 在促销开始日期为空或者晚于制定当日30天时，系统提示开始日期必须早于当天日期+30天，并提示重新输入 |
| Strategy.Confirm.Valid.EndTime           | 在促销起始时间为空或者晚于开始日期30天时，系统提示结束日期必须早于开始日期+30天，并提示重新输入 |
| Strategy.Confirm.Valid.ValidStartTime    | 在代金券有效起始日期早于促销开始日期时，系统提示有效起始时间必须晚于促销开始日期，并提示重新输入 |
| Strategy.Confirm.Valid.ValidEndTime      | 在代金券结束日期早于有效起始日期时，系统提示结束日期不能早于有效起始日期，并提示重新输入 |
| Strategy.Confirm.Valid.Repitition        | 在存在完全重复的促销策略时，系统提示存在重复，验证不通过             |
| Strategy.Confirm.Valid.RepeatedName      | 在存在完全相同的组合包名称时，系统提示存在重复，验证不通过            |
| Strategy.List.Good                       | 在总经理输入商品信息时，系统应该显示商品层次列表待选择              |
| Strategy.Update                          | 在完成策略的制定或删除时，系统应该更新促销策略列表                |
| Strategy.Info                            | 在完成策略的制定或删除时，系统应该显示促销策略列表                |



#### 3.2.20 管理系统账户

- **特性描述**：发生人员调整、职位变动等人事变动时，管理员可以登录管理员账号，进行调整账户、删除账户、管理账户权限等操作。

- **优先级：**高

- **刺激／响应策略：**

  刺激：管理员输入工号进行查询

  响应：系统显示查询结果

  刺激：管理员输入的工号不存在

  响应：系统提示工号不存在并提示重新输入

  刺激：管理员选择账户进行查看

  响应：系统显示完整账户信息

  刺激：管理员选择新增账户的权限

  响应：系统自动生成工号，并显示新增账户的信息

  刺激：管理员选择新增账户是否为最高权限

  响应：系统显示选择结果

  刺激：管理员确认新增账户

  响应：系统提示新增成功并更新账户列表。

  刺激：管理员请求修改账户权限信息

  响应：系统显示编辑界面

  刺激：管理员输入修改的信息

  响应：系统显示输入信息

  刺激：管理员确认保存修改信息

  响应：系统显示修改成功

  刺激：管理员未保存修改信息便退出界面

  响应：系统提示修改未保存，并询问是否保存

  刺激：管理员选择不保存修改

  响应：系统返回原账户信息

  刺激：管理员请求删除账户

  响应：系统询问是否删除

  刺激：管理员确认删除账户

  响应：系统提示删除成功并且更新列表



- **相关功能需求：**


| 需求名称                  | 需求描述                                 |
| --------------------- | ------------------------------------ |
| User.Info             | 在管理员请求查看账户信息时，系统显示账户完整信息             |
| User.Input            | 系统应该允许键盘输入                           |
| User.Input.ID         | 在根据工号进行查询时，系统应该允许管理员输入工号             |
| User.Input.Limit      | 在新增账户或修改账户信息时，系统应该允许输入权限             |
| User.Input.IsHighest  | 在新增账户或修改账户信息时，系统应该允许输入是否最高权限         |
| User.SearchByID       | 系统允许管理员根据工号进行账户查询                    |
| User.Delete           | 在管理员请求删除账户时，系统删除该用户并提示已删除，同时更新账户列表   |
| User.New              | 在管理员请求新增账户时，系统自动生成一个工号，待管理员确认后更新账户信息 |
| User.Modify           | 系统应该允许管理员修改账户信息，并进行更新                |
| User.Modify.Save      | 在管理员确认修改时，系统应该保存修改后的信息，并更新账户信息       |
| User.Modify.Not-Save  | 在管理员不保存修改时，系统应该返回原账户信息               |
| User.Confirm          | 系统应该对一些操作进行确认验证                      |
| User.Confirm.New      | 在总经理确认新增账户时，系统提示新增成功并更新账户列表          |
| User.Confirm.Delete   | 在总经理确认删除账户时，系统提示删除成功并更新账户列表          |
| User.Confirm.Valid    | 系统应该自动验证数据的正确性                       |
| User.Confirm.Valid.ID | 在输入的工号不存在时，系统提示工号不存在并提示重新输入          |
| User.Update           | 系统应该同步更新账户列表与账户信息                    |

------

### 3.3 非功能需求

#### 3.3.1 安全性

- Safety1:系统应该只允许经过验证和授权的账户访问
- Safety2:系统应该按照账户的权限信息给予权限：
  1. 库存管理人员具有库存管理权限，可以执行商品分类管理、商品管理、库存变动查看、库存盘点、制定库存报溢/报损单任务。
  2. 销售人员具有销售人员权限，可以执行客户管理，制定销售单，制定销售退货单任务，并且具有1000元的折让额度。
  3. 销售经理具有销售经理权限，可以执行客户管理，制定销售单，制定销售退货单任务，并且具有5000元的折让额度。
  4. 进货人员具有进货权限，可以执行制定进货单，制定进货退货单任务。
  5. 财务人员具有财务管理权限和最高权限，可以执行账户管理，制定单据，查看销售明细，查看经营历程，查看经营情况，期初建账任务。
  6. 总经理具有总经理权限，可以执行查看销售明细，查看经营历程，查看经营情况，审批单据，制定促销策略任务。
  7. 管理员具有管理员权限，可以执行管理系统账户任务。
- Safety3：系统中有一个管理员账号，只有该账号才能修改其他账号信息


#### 3.3.2 可维护性

- Modifiability1：在系统的商品标识数据格式发生变化时（见Format1），系统要能够在2人天内完成修改。
- Modifiability2：如果系统要增加新的促销类型（例如商品折扣等），要能够在0.25个人月内完成。
- Modifiability3：如果系统要增加新的单据类型，要能够在0.25个人月内完成。



#### 3.3.3 易用性

- Usability1：使用系统1个月的进货人员、库存管理人员、销售人员、财务人员制定单据的效率要达到0.1张单据／分钟。


#### 3.3.4 可靠性

- Reliability1：在客户端与服务器通信时，如果网络故障，系统不能出现故障。
  - Reliability1.1：客户端应该检测到故障，并尝试重新连接网络3次，每次15秒。
  - Reliability1.1.1：重新连接后，客户端应该继续之前的工作。
  - Reliability1.1.2：如果重新连接不成功，客户端应该提示等待5分钟，并在5分钟后再次尝试重新连接。
  - Reliability1.1.2.1：重新连接后，客户端应该继续之前的工作。
  - Reliability1.1.2.2：如果重新连接不成功，客户端报警。

#### 3.3.5 业务规则

- BR1：适用`用户级别`，`参照日期`的客户回馈促销策略：

  `开始日期<=参照日期<=结束日期`

- BR2：适用` 商品标识`，`商品数量`，`参照日期`的组合降价促销策略：

  存在`商品标识集合=组合包商品标识集合`，存在`各商品数量比例=组合包商品数量比例`而且`开始日期<=参照日期<=结束日期`

- BR3：适用`总额`，`参照日期`的总额赠送促销策略：

  `促销总额<=折让后总额`而且`开始日期<=参照日期<=结束日期`

- BR4：促销策略的起止日期约定：

  `开始日期-当前日期<=30天`并且`结束日期-开始日期<=30天`

- BR5：退货日期约定：

  `当前日期-销售日期>=15天`

- BR6：一个客户回馈策略存在重复的判定规则：

  S1为指定的客户回馈策略

  S2为其他的客户回馈策略

  如果存在满足下列条件的S2，则指定客户回馈策略存在重复：

  `S1.客户级别=S2.客户级别`，并且`S1.赠送商品信息=S2.赠送商品信息`（包括商品标识和商品数量），并且`S1.折让金额=S2.折让金额`，并且`S1.赠券信息=S2.赠券信息`（包括赠券金额和使用日期）

  并且`S1.开始日期=S2.开始日期`，`S1.结束日期=S2.结束日期`。

- BR7：一个组合促销策略存在重复的判定规则：

  S1为指定的组合促销策略

  S2为其他的组合促销策略

  如果存在满足下列条件的S2，则指定组合促销策略存在重复：

  对所有的组合商品有：`S1.商品信息=S2.商品信息`（包括商品标识和商品数量）并且`S1.组合包名称=S2.组合包名称`，并且`S1.促销价格=S2.促销价格`

  并且`S1.开始日期=S2.开始日期`，`S1.结束日期=S2.结束日期`。

- BR8：一个总额赠送策略存在重复的判定规则：

  S1为指定的总额赠送策略

  S2为其他的总额赠送策略

  如果存在满足下列条件的S2，则指定组合促销策略存在重复：

  对所有的组合商品有：`S1.商品信息=S2.商品信息`（包括商品标识和商品数量）并且`S1.组合包名称=S2.组合包名称`，并且`S1.促销价格=S2.促销价格`

  并且`S1.开始日期=S2.开始日期`，`S1.结束日期=S2.结束日期`。

  ​



#### 3.3.6 约束

- IC1：系统要在网络上分布为一个服务器和多个客户端。

------

### 3.4 数据需求

#### 3.4.1 数据定义

- DR1：系统需要存储一年内的销售单据、库存单据、财务单据、进货单据。
- DR2：系统删除之后的库存数据和客户数据仍然要继续存储3个月的时间，以保证历史数据显示的正确性。

#### 3.4.2 默认数据

默认数据用于以下情况：
1. 系统中新增加数据时。
2. 编辑数据不小心将内容清空时。
- Default1：库存商品的数量默认为1。
- Default2：所有价格及折让数据默认为1。
- Default3：所有时间数据默认为当天的日期。
- Default4：备注信息默认为空。
- Default5：商品标识数据默认为00000。
- Default6：第一年的期初信息默认为空。
- Default7：系统最初的商品分类编号默认为0000，名称为“全部商品”。

#### 3.4.3 数据格式要求

- Format1：价格和费用等金额数据格式必须是大于等于0，精确到小数点后2位的浮点数，单位为元。
- Format2：日期的格式必须为`yyyy-mm-dd`。
- Format3：数量的格式必须为正整数。
- Format4：进货单编号的格式必须为`JHD-yyyyMMdd-xxxxx`，后五位每天从 1 开始编号。
- Format5：进货退货单编号的格式必须为`JHTHD-yyyyMMdd-xxxxx`，后五位每天从 1 开始编号。
- Format6：销售单编号的格式必须为`XSD-yyyyMMdd-xxxxx`。
- Format7：销售退货单编号的格式必须为`XSTHD-yyyyMMdd-xxxxx`。
- Format8：收款单编号的格式必须为`SKD-yyyyMMdd-xxxxx`。
- Format9：付款单编号的格式必须为`FKD-yyyyMMdd-xxxxx`。
- Format10：现金费用单编号的格式必须为`XJFYD-yyyyMMdd-xxxxx`。

------

### 3.5 其他需求

#### 安装需求

- Install1：在安装系统时，要初始化客户、库存等重要数据。
- Install2：系统投入使用时，需要对用户进行一个星期的集中培训。